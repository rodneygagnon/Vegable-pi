<!DOCTYPE html>
<html lang="en-US" dir="ltr">

  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">


    <!-- ===============================================-->
    <!--    Document Title-->
    <!-- ===============================================-->
    <title>Vegable | Garden like you know what you're doing</title>


    <!-- ===============================================-->
    <!--    Favicons-->
    <!-- ===============================================-->
    <link rel="apple-touch-icon" sizes="180x180" href="./assets/img/favicons/favicon-180x180.png">
    <link rel="icon" type="image/png" sizes="32x32" href="./assets/img/favicons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="./assets/img/favicons/favicon-16x16.png">
    <link rel="shortcut icon" type="image/x-icon" href="./assets/img/favicons/favicon.ico">
    <link rel="manifest" href="./assets/img/favicons/manifest.json">
    <meta name="msapplication-TileImage" content="assets/img/favicons/favicon-150x150.png">
    <meta name="theme-color" content="#ffffff">


    <!-- ===============================================-->
    <!--    Stylesheets-->
    <!-- ===============================================-->
    <link href="assets/lib/loaders.css/loaders.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=PT+Mono%7cPT+Serif:400,400i%7cLato:100,300,400,700,800,900" rel="stylesheet">
    <link href="assets/lib/remodal/remodal.css" rel="stylesheet">
    <link href="assets/lib/remodal/remodal-default-theme.css" rel="stylesheet">
    <link href="assets/css/bootstrap-table.css" rel="stylesheet">
    <link href="assets/css/bootstrap-select.css" rel="stylesheet">
    <link href="assets/css/theme.css" rel="stylesheet">

  </head>


  <body class="has-sidemenu overflow-hidden-x">

    <!--===============================================-->
    <!--    Fancynav-->
    <!--===============================================-->
    <nav class="fancynavbar" data-zanim-lg='{"from":{"opacity":1,"x":70},"to":{"opacity":1,"x":0},"ease":"CubicBezier","duration":0.8,"delay":0.3}' data-zanim-xs='{"from":{"opacity":1,"y":-48},"to":{"opacity":1,"y":0},"ease":"CubicBezier","duration":0.8,"delay":0.3}'
      data-zanim-trigger="scroll" data-exclusive="true">
      <div class="fancynavbar-togglerbar bg-black">
        <a class="fancynavbar-brand" href="/">
          <img class="fancynavbar-brand-img" src="./assets/img/logos/icon-white.svg" alt="" width="30" height="30" data-zanim-lg='{"from":{"opacity":0,"x":45},"to":{"opacity":1,"x":0},"ease":"CubicBezier","duration":0.8,"delay":0.4}' data-zanim-trigger="scroll"
          />

          <!--You can use icon or text logo as well-->
          <!--<span class='fab fa-superpowers fs-3'></span>-->
          <!--<span class='logo-sparrow'>S</span>--></a>
        <div class="fancynavbar-toggler">
          <svg class="fancynavbar-toggler-icon" viewBox="0 0 70 70" xmlns="http://www.w3.org/2000/svg" data-zanim-lg='{"from":{"opacity":0,"x":45},"to":{"opacity":1,"x":0},"ease":"CubicBezier","duration":0.8,"delay":0.5}' data-zanim-trigger="scroll">
            <path id="path-top" d="M20,25c0,0,22,0,30,0c16,0,18.89,40.71-.15,21.75C38.7,35.65,19.9,16.8,19.9,16.8"></path>
            <path id="path-middle" d="M20,32h30"></path>
            <path id="path-bottom" d="M19.9,46.98c0,0,18.8-18.85,29.95-29.95C68.89-1.92,66,38.78,50,38.78c-8,0-30,0-30,0"></path>
          </svg>
        </div>
        <div class="fancynavbar-addon" data-zanim-lg='{"from":{"opacity":0,"x":45},"to":{"opacity":1,"x":0},"ease":"CubicBezier","duration":0.8,"delay":0.4}' data-zanim-trigger="scroll">
          <a class="fancynavbar-addon-item" href="/signout">
            <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="30px" height="30px" viewBox="0 0 299.7 299.7" style="enable-background:new 0 0 299.7 299.7;" xml:space="preserve">
              <g>
                <path class="svg-white" d="M273.8,113.4H93.2c-4.5,0-8.1,3.6-8.1,8.1s3.6,8.1,8.1,8.1h180.6l-46.2,46.2c-3.2,3.2-3.2,8.1,0,11.3
                  c1.6,1.6,3.6,2.4,5.7,2.4c2,0,4-0.8,5.7-2.4l59.9-59.9v-2.4c0.4-0.8,0.8-2,0.8-3.2s-0.4-2-0.8-3.2v-2.4l-59.9-60.3
                  c-3.2-3.2-8.1-3.2-11.3,0c-3.2,3.2-3.2,8.1,0,11.3L273.8,113.4z"/>
                <path class="svg-white" d="M26.3,243h149.4c14.6,0,26.3-11.7,26.3-26.3v-38.5c0-4.5-3.6-8.1-8.1-8.1c-4.5,0-8.1,3.6-8.1,8.1v38.5
                  c0,5.7-4.5,10.1-10.1,10.1H26.3c-5.7,0-10.1-4.5-10.1-10.1V26.3c0-5.7,4.5-10.1,10.1-10.1h149.4c5.7,0,10.1,4.5,10.1,10.1v38.5
                  c0,4.5,3.6,8.1,8.1,8.1c4.5,0,8.1-3.6,8.1-8.1V26.3c0-14.6-11.7-26.3-26.3-26.3H26.3C11.7,0,0,11.7,0,26.3v189.9
                  C0,231.3,11.7,243,26.3,243z"/>
              </g>
            </svg>
          </a>
        </div>
      </div>
      <div class="fancynavbar-collapse">
        <ul class="fancynavbar-nav">
          <li class="fancynav-item">
            <a class="fancynav-link" href="/zones"><span class="fancynav-link-content">zones</span></a>
          </li>
          <li class="fancynav-item">
            <a class="fancynav-link" href="/plantings"><span class="fancynav-link-content">plantings</span></a>
          </li>
          <li class="fancynav-item">
            <a class="fancynav-link" href="/events"><span class="fancynav-link-content">schedules</span></a>
          </li>
           <li class="fancynav-item">
            <a class="fancynav-link" href="/settings"><span class="fancynav-link-content">settings</span></a>
          </li>
       </ul>
      </div>
    </nav>
    <!--===============================================-->
    <!--    End of Fancynav-->
    <!--===============================================-->



    <!-- ===============================================-->
    <!--    Main Content-->
    <!-- ===============================================-->
    <main class="main minh-100vh" id="top">


      <!-- ============================================-->
      <!-- Preloader ==================================-->
      <div class="preloader" id="preloader">
        <div class="loader">
          <div class="line-scale-pulse-out-rapid">
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
          </div>
        </div>
      </div>
      <!-- ============================================-->
      <!-- End of Preloader ===========================-->

      <!-- ============================================-->
      <!-- <section> begin ============================-->
      <section class="bg-light pt-8 pb-7 pt-lg-6 pb-lg-5 pt-xl-8 pb-xl-7">

        <div class="container">
          <div class="row">
            <div class="col-lg-6 col-xl-5">
              <h1 class="fs-3 fs-sm-4">Zones</h1>
              <p class="lead">Current Status of Vegable Zones</p>
            </div>
            <div class="col-lg-6 col-xl-5 text-lg-right">
              <canvas id="weatherIcon" width="64" height="64"></canvas>
              <p id="weatherString" class="lead"></p>
            </div>
          </div>
        </div>
        <!-- end of .container-->

      </section>
      <!-- <section> close ============================-->
      <!-- ============================================-->

      <!-- ============================================-->
      <!-- <section> begin ============================-->
      <section class="py-0">

        <div class="container">
          <div class="row justify-content-between">
            <div class="col-lg-6 pt-6 pb-3">
              <h3 class="text-danger mt-3">Control Zones</h3>
              <div class="table-responsive mt-3">
                <table id="cntl-zone-table" class="bootstrap-table table table-no-bordered" data-sort-name="name" data-sort-order="desc"></table>
              </div>
            </div>
          </div>

          <div class="row justify-content-between">
            <div class="col-lg-12 pb-6 pt-3">
              <h3 class="text-danger mt-3">Planting Zones</h3>
              <div class="table-responsive mt-3">
                <table id="open-zone-table" class="bootstrap-table table table-no-bordered" data-sort-name="id" data-sort-order="asc" data-detail-view="true" data-detail-formatter="detailFormatter"></table>
              </div>
           </div>
          </div>
        </div>
        <!-- end of .container-->

      </section>
      <!-- <section> close ============================-->
      <!-- ============================================-->
		

    </main>
    <!-- ===============================================-->
    <!--    End of Main Content-->
    <!-- ===============================================-->


    <!--===============================================-->
    <!--    Footer-->
    <!--===============================================-->
    <footer class="footer bg-black text-600 py-4 text-sans-serif text-center overflow-hidden" data-zanim-timeline="{}" data-zanim-trigger="scroll">
      <div class="container">
        <div class="row align-items-center">
          <div class="col-lg-4 order-lg-2">
            <a class="indicator indicator-up" href="#top" data-fancyscroll="data-fancyscroll"><span class="indicator-arrow indicator-arrow-one" data-zanim-xs='{"from":{"opacity":0,"y":15},"to":{"opacity":1,"y":-5,"scale":1},"ease":"Back.easeOut","duration":0.4,"delay":0.9}'></span><span class="indicator-arrow indicator-arrow-two" data-zanim-xs='{"from":{"opacity":0,"y":15},"to":{"opacity":1,"y":-5,"scale":1},"ease":"Back.easeOut","duration":0.4,"delay":1.05}'></span></a>
          </div>
          <div class="col-lg-4 text-lg-left mt-4 mt-lg-0">
            <p class="fs--1 text-uppercase ls font-weight-bold mb-0">
              Copyright &copy; 2018 Vegable</p>
          </div>
          <div class="col-lg-4 text-lg-right order-lg-2 mt-2 mt-lg-0">
            <p class="fs--1 text-uppercase ls font-weight-bold mb-0">Made with<span class="text-danger fas fa-heart mx-1"></span>by
              <a class="text-600" href="https://vegable.co/">Vegable</a>
            </p>
          </div>
        </div>
      </div>
    </footer>


    <!-- ===============================================-->
    <!--    Modals-->
    <!-- ===============================================-->
    <div class="remodal" data-remodal-id="editZoneModal" align="left" >
      <button class="remodal-close" data-remodal-action="close"></button>
      <h4 id="remodalTitle">Edit Zone</h4>
      <p>Change the zone name, description and flow rate.</p><br>

      <form method="post" action="/zones/update">
        <!--  HIDDEN FIELDS -->
        <input type="hidden" id="id" name="id"/>
        <input type="hidden" id="aw" name="aw"/>
        <input type="hidden" id="ib" name="ib"/>
        <input type="hidden" id="color" name="color"/>
        <input type="hidden" id="textColor" name="textColor"/>

        <div class="row mb-4">
          <div class="col">
            <label for="name" class="col-form-label">Name</label>
            <input type="text" class="form-control" id="name" name="name">
          </div>
        </div>

        <div class="row mb-4">
          <div class="col">
            <label for="area" class="col-form-label">Area (sqft)</label>
            <input type="text" class="form-control" id="area" name="area">
          </div>
          <div class="col">
            <label for="swhc" class="col-form-label">Soil Type</label>
            <select class="selectpicker form-control" id="swhc" name="swhc" data-size="7" required="">
              <%
                var soilTypes = [ "Coarse", "Sandy", "Medium", "Fine" ];
                var soilWHC = [ "0.75", "1.25", "1.5", "2.0" ];
                for ( var i = 0; i < soilTypes.length; i++ ) {
                  %><option value="<%=soilWHC[ i ] %>"><%=soilTypes[ i ] %></option><%
                }
              %>
            </select>
          </div>
        </div>

        <div class="row mb-4">
          <div class="col">
            <label for="irreff" class="col-form-label">Irrigation Type</label>
            <select class="selectpicker form-control" id="irreff" name="irreff" data-size="7" required="">
              <%
                var irrTypes = [ "Drip", "Spray" ];
                var irrEff = [ "90", "80" ];
                for ( var i = 0; i < irrTypes.length; i++ ) {
                  %><option value="<%=irrEff[ i ] / 100 %>"><%=irrTypes[ i ] %></option><%
                }
              %>
            </select>
          </div>
          <div class="col">
            <label for="flowrate" class="col-form-label">Flow Rate (gpm)</label>
            <select class="selectpicker form-control" id="flowrate" name="flowrate" data-size="7" required="">
              <%
                var flowTypes = [ "0.5", "1.0", "2.0" ];
                var rates = [ "0.5", "1", "2" ];
                for ( var i = 0; i < rates.length; i++ ) {
                  %><option value="<%=rates[ i ] %>"><%=flowTypes[ i ] %></option><%
                }
              %>
            </select>
          </div>
        </div>

        <button type="submit" class="btn btn-sm btn-primary mr-3">Save</button>
        <button type="button" class="btn btn-sm btn-outline-danger" data-remodal-action="cancel">Cancel</button>
      </form>
     </div>
      
    <div class="remodal" data-remodal-id="switchModal">
      <button class="remodal-close" data-remodal-action="close"></button>
      <h4 id="remodalTitle">Switch Zone</h4>
      <p></p>
      <button class="btn btn-sm btn-primary mr-3" data-remodal-action="confirm">Awesome</button>
    </div> 
      

    <!-- ===============================================-->
    <!--    JavaScripts-->
    <!-- ===============================================-->
    <script src="assets/js/jquery.min.js"></script>
    <script src="assets/js/popper.min.js"></script>
    <script src="assets/js/bootstrap.js"></script>
    <script src="assets/js/plugins.js"></script>
    <script src="assets/lib/loaders.css/loaders.css.js"></script>
    <script src="assets/js/stickyfill.min.js"></script>
    <script src="assets/lib/remodal/remodal.js"></script>
    <script src="assets/js/rellax.min.js"></script>
    <script src="assets/js/bootstrap-select.js"></script>
    <script src="assets/js/skycons.js"></script>
    <script src="assets/js/theme.js"></script>
    <script src="assets/js/bootstrap-table.js"></script>
      
    <script type="text/javascript">
      var $cntlZoneTable = $('#cntl-zone-table');
      var $openZoneTable = $('#open-zone-table');

      function initTables() {
        $cntlZoneTable.bootstrapTable({
            url: "/api/zones/getControl",
            columns: [
              {
                field: 'name',
                title: 'Name',
                sortable: true
              },
              {
                field: 'started',
                title: 'Start Time',
                sortable: true,
                formatter: function (value) {
                  return `<span>${(value == 0 ? "" : new Date(value).toLocaleString())}</span>`;
                }
              },
              {
                field: 'actions',
                title: 'Actions',
                sortable: false,
                events: operateEvents,
                formatter: cntlOperateFormatter
              }

            ]
        });

        $openZoneTable.bootstrapTable({
            url: "/api/zones/get",
            icons: {
              detailOpen: 'fas fa-chevron-right',
              detailClose: 'fas fa-chevron-down'
            },
            columns: [
              {
                field: 'name',
                title: 'Name',
                sortable: true
              },
              {
                field: 'area',
                title: 'Area (sqft)',
                sortable: true,
                formatter: function (value, row) {
                  var soilWHC = [ 0.75, 1.25, 1.5, 2.0 ];
                  var soilTypes = [ "Coarse", "Sandy", "Medium", "Fine" ];
                  for ( var i = 0; i < soilWHC.length; i++ )
                    if (row.swhc === soilWHC[i]) return `<span>${value} (${soilTypes[i]} soil)</span>`;
                }
              },  
              {
                field: 'irreff',
                title: 'Irrigation',
                sortable: true,
                formatter: function (value, row) {
                  var irrEff = [ 0.9, 0.8 ];
                  var irrTypes = [ "Drip", "Spray" ];
                  for ( var i = 0; i < irrEff.length; i++ )
                    if (value === irrEff[i]) return `<span>${irrTypes[i]} (${row.flowrate} gpm)</span>`;
                }
              },
              {
                field: 'plantings',
                title: 'Plantings',
                sortable: true,
                formatter: function (value) {
                  return `<span>${(typeof value === 'undefined' ? 0 : value)}</span>`;
                }
              },
              {
                field: 'started',
                title: 'Start Time',
                sortable: true,
                formatter: function (value) {
                  return `<span>${(value == 0 ? "" : new Date(value).toLocaleString())}</span>`;
                }
              },
              {
                field: 'actions',
                title: 'Actions',
                sortable: false,
                events: operateEvents,
                formatter: openOperateFormatter
              }
            ]
        });
      }

       function cntlOperateFormatter(value, row, index) {
          var runningStyle = (row.status ? "svg-primary" : "svg-secondary");
          return [
             '<div class="table-icons">',
                '<a rel="tooltip" title="Power" class="power table-actions" href="javascript:void(0)">',
                  '<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="24px" height="24px" viewBox="0 0 217.7 280" style="enable-background:new 0 0 217.7 280;" xml:space="preserve">',
                    '<g transform="translate(0,-952.36218)">',
                      `<path class="${runningStyle}" d="M108,952.4c-2.1,0.2-4,1.2-5.5,2.6C49.9,1005.1,0,1068.6,0,1126.6c0,57.7,48.9,105.7,108.8,105.7 c59.9,0,108.8-48,108.8-105.7c0-48.6-35.1-101-77.2-146.3c-3.3-3.9-9.2-4.5-13.1-1.2c-3.9,3.3-4.5,9.2-1.2,13.1 c0.2,0.3,0.5,0.5,0.7,0.7c40.6,43.7,72.1,94.4,72.1,133.6c0,47.1-40.2,87.1-90.2,87.1c-49.9,0-90.2-39.9-90.2-87.1 c0-46.7,45.7-109.5,96.6-158.1c3.8-3.5,4-9.4,0.5-13.2C113.8,953.2,110.9,952.1,108,952.4z M55.9,1064.3c-3.4,0.1-6.5,2-8.1,5 c-9.7,17.6-15.9,34.8-16.7,53.8c0,0.1,0,0.2,0,0.3c-0.4,21.8,7.4,42.3,21.4,56.5c3.4,3.9,9.3,4.3,13.2,0.9s4.3-9.3,0.9-13.2 c-0.3-0.3-0.5-0.6-0.8-0.8c-10-10.1-16.2-25.7-15.9-42.8c0,0,0-0.1,0-0.1c0-0.1,0-0.1,0-0.2c0.7-15.4,5.6-29.4,14.4-45.4 c2.6-4.5,1-10.2-3.4-12.7C59.2,1064.7,57.6,1064.2,55.9,1064.3z"/>`,
                    '</g>',
                  '</svg>',
                '</a>',
            '</div>',
          ].join('');
      }

      function openOperateFormatter(value, row, index) {
          var activeStyle = (row.plantings ? "svg-success" : "svg-secondary");
          var runningStyle = (row.status ? "svg-primary" : "svg-secondary");
          return [
             '<div class="table-icons">',
                '<a rel="tooltip" title="Edit" class="edit table-actions" href="javascript:void(0)">',
                  '<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="24px" height="24px" viewBox="0 0 280 280" style="enable-background:new 0 0 280 280;" xml:space="preserve">',
                    '<path class="svg-secondary" d="M268.5,30.1l-18.6-18.6c-15.3-15.3-40.3-15.3-55.7,0l-167,167c-1.1,1.1-1.8,2.3-2.2,3.8L0.3,268.8 c-0.9,3.1,0,6.3,2.2,8.6c1.7,1.7,3.9,2.6,6.2,2.6c0.8,0,1.6-0.1,2.4-0.3l86.6-24.7c1.4-0.4,2.7-1.2,3.8-2.2l166.9-167 c7.4-7.4,11.5-17.3,11.5-27.8S275.9,37.5,268.5,30.1z M90.7,238.7l-69.3,19.8l19.8-69.3L175.7,54.8l49.5,49.5L90.7,238.7z M256.1,73.4l-18.6,18.6l-49.5-49.5l18.6-18.6c8.5-8.5,22.4-8.5,30.9,0l18.6,18.6c4.1,4.1,6.4,9.6,6.4,15.5 C262.5,63.7,260.2,69.2,256.1,73.4z"/>',
                  '</svg>',
                '</a>',
                `<a rel="tooltip" title="Active" class="active table-actions" href="javascript:void(0)">`,
                  '<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="24px" height="24px" viewBox="0 0 261.7 280" style="enable-background:new 0 0 261.7 280;" xml:space="preserve">',
                    '<g>',
	                   `<path class="${activeStyle}" d="M135.8,79.2c-6.7,0-12.1,5.4-12.1,12.1v60.4c0,4.6,2.5,8.7,6.7,10.8l45.4,23.3c1.7,0.8,3.8,1.2,5.4,1.2 c4.6,0,8.8-2.5,10.8-6.7c2.9-5.8,0.8-13.3-5.4-16.2l-38.8-20V91.3C147.9,84.6,142.5,79.2,135.8,79.2z"/>`,
	                   `<path class="${activeStyle}" d="M247.1,84.2h0.4c2.9,0,5.8-1.2,7.9-2.9c2.5-2.1,3.8-5,3.8-8.3l2.5-51.7c0.4-6.7-5-12.5-11.7-12.5 c-6.7-0.4-12.5,5-12.5,11.7l-0.8,18.3C210.8,14.2,176.2,0,140,0C62.5,0,0,62.9,0,140c0,77.5,62.9,140,140,140 c47.1,0,90.8-23.3,116.7-62.5c3.8-5.4,2.1-12.9-3.3-16.7c-5.4-3.8-12.9-2.1-16.7,3.3c-21.7,32.5-57.9,51.7-96.7,51.7 c-64.2,0-115.8-52.1-115.8-115.8S76.2,24.2,140,24.2c31.7,0,61.7,12.9,83.3,35.4l-27.5-1.2c-6.7-0.4-12.5,5-12.5,11.7 c-0.4,6.7,5,12.5,11.7,12.5L247.1,84.2z"/>`,
                    '</g>',
                  '</svg>',
                '</a>',
                `<a rel="tooltip" title="Power" class="power table-actions" href="javascript:void(0)">`,
                  '<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="24px" height="24px" viewBox="0 0 217.7 280" style="enable-background:new 0 0 217.7 280;" xml:space="preserve">',
                    '<g transform="translate(0,-952.36218)">',
                      `<path class="${runningStyle}" d="M108,952.4c-2.1,0.2-4,1.2-5.5,2.6C49.9,1005.1,0,1068.6,0,1126.6c0,57.7,48.9,105.7,108.8,105.7 c59.9,0,108.8-48,108.8-105.7c0-48.6-35.1-101-77.2-146.3c-3.3-3.9-9.2-4.5-13.1-1.2c-3.9,3.3-4.5,9.2-1.2,13.1 c0.2,0.3,0.5,0.5,0.7,0.7c40.6,43.7,72.1,94.4,72.1,133.6c0,47.1-40.2,87.1-90.2,87.1c-49.9,0-90.2-39.9-90.2-87.1 c0-46.7,45.7-109.5,96.6-158.1c3.8-3.5,4-9.4,0.5-13.2C113.8,953.2,110.9,952.1,108,952.4z M55.9,1064.3c-3.4,0.1-6.5,2-8.1,5 c-9.7,17.6-15.9,34.8-16.7,53.8c0,0.1,0,0.2,0,0.3c-0.4,21.8,7.4,42.3,21.4,56.5c3.4,3.9,9.3,4.3,13.2,0.9s4.3-9.3,0.9-13.2 c-0.3-0.3-0.5-0.6-0.8-0.8c-10-10.1-16.2-25.7-15.9-42.8c0,0,0-0.1,0-0.1c0-0.1,0-0.1,0-0.2c0.7-15.4,5.6-29.4,14.4-45.4 c2.6-4.5,1-10.2-3.4-12.7C59.2,1064.7,57.6,1064.2,55.9,1064.3z"/>`,
                    '</g>',
                  '</svg>',
                '</a>',
            '</div>',
          ].join('');
      }

      function detailFormatter(index, row) {
          var html = [];
        
          html.push('<p>    ')
          $.each(row, function (key, value) {
            switch (key) {
              case 'initDay':
              case 'initKc':
              case 'devDay':
              case 'devKc':
              case 'midDay':
              case 'midKc':
              case 'lateDay':
              case 'lateKc':
                html.push('<b>    ' + key + ':</b> ' + value);
                break;
            }
          });
          html.push('</p>');
          return html.join('');
      }
      

     $().ready(function(){
        var skycons = new Skycons();
        $.getJSON('/api/weather/get', (conditions) => {
          $('#weatherString').replaceWith(`<p id="weatherString" class="lead">${conditions.summary}, ${conditions.temperature.toFixed(1)}ËšF</p>`);
          skycons.add("weatherIcon", conditions.icon);
          skycons.play();               
        });

        window.operateEvents = {
          'click .power': function (e, value, row, index) {
             $.ajax({
                  url: `/zones/enable/${row.id}`,
                  type: 'POST',
                  data: {'submit':true}, // An object with the key 'submit' and value 'true;
                  success: function (result) {
                    $cntlZoneTable.bootstrapTable('refresh');
                    $openZoneTable.bootstrapTable('refresh');
                  }
              });
          },
          'click .edit': function (e, value, row, index) {
            var inst = $('[data-remodal-id=editZoneModal]').remodal();

            $('[data-remodal-id=editZoneModal] #remodalTitle').text(`Edit: ${row.name} (Port #: ${row.id})`);
            $('[data-remodal-id=editZoneModal] #id').val(row.id);
            $('[data-remodal-id=editZoneModal] #name').val(row.name);
            $('[data-remodal-id=editZoneModal] #area').val(row.area);
            $('[data-remodal-id=editZoneModal] #irreff').selectpicker('val', row.irreff);
            $('[data-remodal-id=editZoneModal] #swhc').selectpicker('val', row.swhc);
            $('[data-remodal-id=editZoneModal] #flowrate').selectpicker('val', row.flowrate);

            inst.open();
          }
        };
         
        initTables();
        
        //activate the tooltips after the data table is initialized
        $('[rel="tooltip"]').tooltip();

        $(window).resize(function () {
            $cntlZoneTable.bootstrapTable('resetView');
            $openZoneTable.bootstrapTable('resetView');
        });
                
      });
     
	</script>

  </body>

</html>