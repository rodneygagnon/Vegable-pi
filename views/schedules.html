<!DOCTYPE html>
<html lang="en-US" dir="ltr">

  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">


    <!-- ===============================================-->
    <!--    Document Title-->
    <!-- ===============================================-->
    <title>Vegable | Garden like you know what you are doing</title>


    <!-- ===============================================-->
    <!--    Favicons-->
    <!-- ===============================================-->
    <link rel="apple-touch-icon" sizes="180x180" href="./assets/img/favicons/favicon-180x180.png">
    <link rel="icon" type="image/png" sizes="32x32" href="./assets/img/favicons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="./assets/img/favicons/favicon-16x16.png">
    <link rel="shortcut icon" type="image/x-icon" href="./assets/img/favicons/favicon.ico">
    <link rel="manifest" href="./assets/img/favicons/manifest.json">
    <meta name="msapplication-TileImage" content="assets/img/favicons/favicon-150x150.png">
    <meta name="theme-color" content="#ffffff">


    <!-- ===============================================-->
    <!--    Stylesheets-->
    <!-- ===============================================-->
    <link href="assets/lib/loaders.css/loaders.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=PT+Mono%7cPT+Serif:400,400i%7cLato:100,300,400,700,800,900" rel="stylesheet">
    <link href="assets/lib/remodal/remodal.css" rel="stylesheet">
    <link href="assets/lib/remodal/remodal-default-theme.css" rel="stylesheet">
    <link href="assets/css/bootstrap-table.css" rel="stylesheet">
    <link href="assets/css/tempusdominus-bootstrap-4.css" rel="stylesheet">
    <link href="assets/css/bootstrap-select.css" rel="stylesheet">
    <link href="assets/css/fullcalendar.min.css" rel="stylesheet">
    <link href="assets/css/fullcalendar.print.min.css" media="print" rel="stylesheet">
    <link href="assets/css/theme.css" rel="stylesheet">

  </head>


  <body class="has-sidemenu overflow-hidden-x">


    <!--===============================================-->
    <!--    Fancynav-->
    <!--===============================================-->
    <nav class="fancynavbar" data-zanim-lg='{"from":{"opacity":1,"x":70},"to":{"opacity":1,"x":0},"ease":"CubicBezier","duration":0.8,"delay":0.3}' data-zanim-xs='{"from":{"opacity":1,"y":-48},"to":{"opacity":1,"y":0},"ease":"CubicBezier","duration":0.8,"delay":0.3}'
      data-zanim-trigger="scroll" data-exclusive="true">
      <div class="fancynavbar-togglerbar bg-black">
        <a class="fancynavbar-brand" href="/">
          <img class="fancynavbar-brand-img" src="./assets/img/logos/icon-white.svg" alt="" width="30" height="30" data-zanim-lg='{"from":{"opacity":0,"x":45},"to":{"opacity":1,"x":0},"ease":"CubicBezier","duration":0.8,"delay":0.4}' data-zanim-trigger="scroll"
          />

          <!--You can use icon or text logo as well-->
          <!--<span class='fab fa-superpowers fs-3'></span>-->
          <!--<span class='logo-sparrow'>S</span>--></a>
        <div class="fancynavbar-toggler">
          <svg class="fancynavbar-toggler-icon" viewBox="0 0 70 70" xmlns="http://www.w3.org/2000/svg" data-zanim-lg='{"from":{"opacity":0,"x":45},"to":{"opacity":1,"x":0},"ease":"CubicBezier","duration":0.8,"delay":0.5}' data-zanim-trigger="scroll">
            <path id="path-top" d="M20,25c0,0,22,0,30,0c16,0,18.89,40.71-.15,21.75C38.7,35.65,19.9,16.8,19.9,16.8"></path>
            <path id="path-middle" d="M20,32h30"></path>
            <path id="path-bottom" d="M19.9,46.98c0,0,18.8-18.85,29.95-29.95C68.89-1.92,66,38.78,50,38.78c-8,0-30,0-30,0"></path>
          </svg>
        </div>
        <div class="fancynavbar-addon" data-zanim-lg='{"from":{"opacity":0,"x":45},"to":{"opacity":1,"x":0},"ease":"CubicBezier","duration":0.8,"delay":0.4}' data-zanim-trigger="scroll">
          <a class="fancynavbar-addon-item" href="/settings">
            <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="30px" height="30px" viewBox="0 0 299.7 299.7" style="enable-background:new 0 0 299.7 299.7;" xml:space="preserve">
              <g>
                <path class="svg-white" d="M149.8,299.7c-6.2,0-12.5-0.4-18.7-1.2c-8.3-1-14.6-8.1-14.6-16.5v-18c0-1.5-0.9-2.7-2.3-3.2
                  c-6.1-1.9-12-4.4-17.7-7.3c-1.3-0.7-2.8-0.5-3.9,0.6l-12.7,12.7c-3.2,3.2-7.3,4.9-11.8,4.9c-3.7,0-7.3-1.3-10.2-3.5
                  c-9.9-7.7-18.8-16.6-26.5-26.5c-5.1-6.6-4.6-16.1,1.4-22L45.6,207c1.1-1.1,1.3-2.5,0.6-3.9c-2.9-5.7-5.4-11.6-7.3-17.7
                  c-0.5-1.5-1.7-2.3-3.2-2.3h-18c-8.4,0-15.5-6.3-16.5-14.6c-1.6-12.4-1.6-25,0-37.4c1-8.3,8.1-14.6,16.5-14.6h18
                  c1.5,0,2.7-0.9,3.2-2.3c1.9-6.1,4.4-12,7.3-17.7c0.7-1.4,0.5-2.8-0.6-3.9L32.8,79.9c-5.9-5.9-6.5-15.4-1.4-22
                  c7.7-9.9,16.6-18.8,26.5-26.5c2.9-2.3,6.6-3.5,10.2-3.5c4.4,0,8.6,1.7,11.8,4.9l12.7,12.7c1.1,1.1,2.5,1.3,3.9,0.6
                  c5.7-2.9,11.6-5.4,17.7-7.3c1.5-0.5,2.3-1.7,2.3-3.2v-18c0-8.4,6.3-15.5,14.6-16.5c12.4-1.5,25.1-1.5,37.4,0
                  c8.3,1,14.6,8.1,14.6,16.5v18c0,1.5,0.9,2.7,2.3,3.2c6.1,1.9,12,4.4,17.7,7.3c1.3,0.7,2.8,0.5,3.9-0.6l12.7-12.7
                  c3.2-3.2,7.3-4.9,11.8-4.9c3.7,0,7.3,1.3,10.2,3.5c9.9,7.7,18.8,16.6,26.5,26.5c5.1,6.6,4.6,16.1-1.4,22l-12.7,12.7
                  c-1.1,1.1-1.3,2.5-0.6,3.9c2.9,5.7,5.4,11.6,7.3,17.7c0.5,1.5,1.7,2.3,3.2,2.3h18c8.4,0,15.5,6.3,16.5,14.6c1.6,12.4,1.6,25,0,37.4
                  c-1,8.3-8.1,14.6-16.5,14.6h-18c-1.5,0-2.7,0.9-3.2,2.3c-1.9,6.1-4.4,12-7.3,17.7c-0.7,1.4-0.5,2.8,0.6,3.9l12.7,12.7
                  c5.9,5.9,6.5,15.4,1.4,22c-7.7,9.9-16.6,18.8-26.5,26.5c-2.9,2.3-6.6,3.5-10.2,3.5c-4.4,0-8.6-1.7-11.8-4.9L207,254.1
                  c-1.1-1.1-2.5-1.3-3.9-0.6c-5.7,2.9-11.6,5.4-17.7,7.3c-1.5,0.5-2.3,1.7-2.3,3.2v18c0,8.4-6.3,15.5-14.6,16.5
                  C162.4,299.3,156.1,299.7,149.8,299.7z M95,239.8c2.6,0,5.3,0.6,7.7,1.9c5,2.6,10.3,4.8,15.6,6.5c6.9,2.2,11.6,8.6,11.6,15.9v18
                  c0,1.7,1.2,3.1,2.9,3.3c11.3,1.4,22.8,1.4,34.1,0c1.7-0.2,2.9-1.6,2.9-3.3v-18c0-7.3,4.6-13.6,11.6-15.9c5.4-1.7,10.6-3.9,15.7-6.5
                  c6.4-3.3,14.3-2,19.4,3l12.7,12.7c0.6,0.6,1.5,1,2.4,1c0.5,0,1.3-0.1,2.1-0.7c9-7,17.1-15.1,24.1-24.1c1-1.3,0.9-3.2-0.3-4.4
                  l-12.7-12.7c-5.1-5.1-6.4-12.9-3-19.4c2.6-5,4.8-10.3,6.5-15.6c2.2-6.9,8.6-11.6,15.9-11.6h18c1.7,0,3.1-1.2,3.3-2.9
                  c1.4-11.3,1.4-22.8,0-34.1c-0.2-1.7-1.6-2.9-3.3-2.9h-18c-7.3,0-13.6-4.7-15.9-11.6c-1.7-5.4-3.9-10.7-6.5-15.7
                  c-3.3-6.5-2.1-14.3,3-19.4l12.7-12.7c1.2-1.2,1.3-3.1,0.3-4.4c-7-9-15.1-17.1-24.1-24.1c-0.8-0.6-1.5-0.7-2.1-0.7
                  c-0.9,0-1.7,0.4-2.4,1L216.5,55c-5.1,5.1-13,6.3-19.4,3c-5-2.6-10.3-4.8-15.6-6.5c-6.9-2.2-11.6-8.6-11.6-15.9v-18
                  c0-1.7-1.2-3.1-2.9-3.3c-11.3-1.4-22.8-1.4-34.1,0c-1.7,0.2-2.9,1.6-2.9,3.3v18c0,7.3-4.7,13.6-11.6,15.9
                  c-5.4,1.7-10.6,3.9-15.6,6.5c-6.4,3.3-14.3,2-19.4-3L70.5,42.3c-0.6-0.6-1.5-1-2.4-1c-0.5,0-1.3,0.1-2.1,0.7
                  C57.1,49,49,57.1,42,66.1c-1,1.3-0.9,3.2,0.3,4.4L55,83.2c5.1,5.1,6.4,12.9,3,19.4c-2.6,5-4.8,10.3-6.5,15.6
                  c-2.2,6.9-8.6,11.6-15.9,11.6h-18c-1.7,0-3.1,1.2-3.3,2.9c-1.4,11.3-1.4,22.8,0,34.1c0.2,1.7,1.6,2.9,3.3,2.9h18
                  c7.3,0,13.6,4.7,15.9,11.6c1.7,5.4,3.9,10.6,6.5,15.6c3.3,6.5,2.1,14.3-3,19.4l-12.7,12.7c-1.2,1.2-1.3,3.1-0.3,4.4
                  c7,9,15.1,17.1,24.1,24.1c0.8,0.6,1.5,0.7,2.1,0.7c0.9,0,1.7-0.3,2.4-1l12.7-12.7C86.4,241.5,90.6,239.8,95,239.8z M149.8,206.4
                  c-15.1,0-29.3-5.9-40-16.6c-10.7-10.7-16.6-24.9-16.6-40c0-15.1,5.9-29.3,16.6-40c10.7-10.7,24.9-16.6,40-16.6s29.3,5.9,40,16.6
                  c10.7,10.7,16.6,24.9,16.6,40c0,15.1-5.9,29.3-16.6,40C179.2,200.6,165,206.4,149.8,206.4z M149.8,106.5
                  c-11.6,0-22.4,4.5-30.6,12.7s-12.7,19-12.7,30.6c0,11.6,4.5,22.4,12.7,30.6c8.2,8.2,19,12.7,30.6,12.7s22.4-4.5,30.6-12.7
                  s12.7-19,12.7-30.6c0-11.6-4.5-22.4-12.7-30.6S161.4,106.5,149.8,106.5z"/>
              </g>
            </svg>
          </a>
        </div>
      </div>
      <div class="fancynavbar-collapse">
        <ul class="fancynavbar-nav">
          <li class="fancynav-item">
            <a class="fancynav-link" href="/schedules"><span class="fancynav-link-content">schedules</span></a>
          </li>
          <li class="fancynav-item">
            <a class="fancynav-link" href="/plantings"><span class="fancynav-link-content">plantings</span></a>
          </li>
        </ul>
      </div>
    </nav>
    <!--===============================================-->
    <!--    End of Fancynav-->
    <!--===============================================-->



    <!-- ===============================================-->
    <!--    Main Content-->
    <!-- ===============================================-->
    <main class="main minh-100vh" id="top">


      <!-- ============================================-->
      <!-- Preloader ==================================-->
      <div class="preloader" id="preloader">
        <div class="loader">
          <div class="line-scale-pulse-out-rapid">
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
          </div>
        </div>
      </div>
      <!-- ============================================-->
      <!-- End of Preloader ===========================-->

      <!-- ============================================-->
      <!-- <section> begin ============================-->
      <section class="bg-light pt-8 pb-7 pt-lg-6 pb-lg-5 pt-xl-8 pb-xl-7">

        <div class="container">
          
<!--
            <div class="table-icons">
                <a rel="tooltip" title="Edit" class="edit table-actions text-warning" href="javascript:void(0)">
                    <i class="fas fa-edit"></i>
                </a>
                <a rel="tooltip" title="Power" class="power table-actions text-secondary" href="javascript:void(0)">
                  <i class="fas fa-power-off"></i>
                </a>
            </div>
          
-->
          <div class="row">
            <div class="col-lg-6 col-xl-5">
              <h1 class="fs-3 fs-sm-4">Schedules</h1>
              <p class="lead">Days and times when zones will be running</p>
            </div>
          </div>
        </div>
        <!-- end of .container-->

      </section>
      <!-- <section> close ============================-->
      <!-- ============================================-->

      <!-- ============================================-->
      <!-- <section> begin ============================-->
      <section class="py-0">

        <div class="container">
          <div class="row justify-content-between">
            <div class="col-lg-12 py-6">
              <div id="fullCalendar"></div>
           </div>
          </div>
        </div>
        <!-- end of .container-->

      </section>
      <!-- <section> close ============================-->
      <!-- ============================================-->
		

    </main>
    <!-- ===============================================-->
    <!--    End of Main Content-->
    <!-- ===============================================-->


    <!--===============================================-->
    <!--    Footer-->
    <!--===============================================-->
    <footer class="footer bg-black text-600 py-4 text-sans-serif text-center overflow-hidden" data-zanim-timeline="{}" data-zanim-trigger="scroll">
      <div class="container">
        <div class="row align-items-center">
          <div class="col-lg-4 order-lg-2">
            <a class="indicator indicator-up" href="#top" data-fancyscroll="data-fancyscroll"><span class="indicator-arrow indicator-arrow-one" data-zanim-xs='{"from":{"opacity":0,"y":15},"to":{"opacity":1,"y":-5,"scale":1},"ease":"Back.easeOut","duration":0.4,"delay":0.9}'></span><span class="indicator-arrow indicator-arrow-two" data-zanim-xs='{"from":{"opacity":0,"y":15},"to":{"opacity":1,"y":-5,"scale":1},"ease":"Back.easeOut","duration":0.4,"delay":1.05}'></span></a>
          </div>
          <div class="col-lg-4 text-lg-left mt-4 mt-lg-0">
            <p class="fs--1 text-uppercase ls font-weight-bold mb-0">
              Copyright &copy; 2018 Vegable</p>
          </div>
          <div class="col-lg-4 text-lg-right order-lg-2 mt-2 mt-lg-0">
            <p class="fs--1 text-uppercase ls font-weight-bold mb-0">Made with<span class="text-danger fas fa-heart mx-1"></span>by
              <a class="text-600" href="https://vegable.co/">Vegable</a>
            </p>
          </div>
        </div>
      </div>
    </footer>


    <!-- ===============================================-->
    <!--    Modals-->
    <!-- ===============================================-->
    <div class="remodal" data-remodal-id="editScheduleModal" align="left" >
      <button class="remodal-close" data-remodal-action="close"></button>
      <h4 id="remodalTitle">Create/Update Schedule</h4>
      <p>Set a Vegable Schedule.</p><br>

      <form method="post" action="/schedules/update">
        <!--  HIDDEN FIELDS -->
        <input type="hidden" id="id" name="id"/>

        <div class="form-group">
          <label for="sid" class="col-form-label">Zone</label>
          <select class="selectpicker form-control" id="sid" name="sid" required="" placeholder="Zone">
            <% for(var i=0; i < zones.length; i++) { %>
              <option value="<%= zones[i].id %>"><%= zones[i].name %></option>
            <% } %>
          </select>
        </div>

        <div class="form-group">
          <label for="name" class="col-form-label">Title</label>
          <input type="text" class="form-control" id="title" name="title">
        </div>

         <div class="form-group">
          <label for="start" class="col-form-label">Start</label>
           <div class="input-group date" id="starttimepicker" data-target-input="nearest">
              <input id="start" name="start" type="text" class="form-control datetimepicker-input" data-target="#starttimepicker"/>
              <div class="input-group-append" data-target="#starttimepicker" data-toggle="datetimepicker">
                  <div class="input-group-text"><i class="fa fa-calendar"></i></div>
              </div>
          </div>
        </div>

        <div class="form-group">
          <label for="end" class="col-form-label">End</label>
          <div class="input-group date" id="endtimepicker" data-target-input="nearest">
              <input id="end" name="end" type="text" class="form-control datetimepicker-input" data-target="#endtimepicker"/>
              <div class="input-group-append" data-target="#endtimepicker" data-toggle="datetimepicker">
                  <div class="input-group-text"><i class="fa fa-calendar"></i></div>
              </div>
          </div>
        </div>

        <div class="form-group">
          <label for="repeatDow" class="col-form-label">Repeat</label>
          <select multiple class="selectpicker form-control" id="repeatDow" name="repeatDow">
							<%
								var repeats = [ "Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday", "None" ];
								for ( var i = 0; i < repeats.length; i++ ) {
									var selected = ( i === repeats.length ) ? "selected" : "";

									%><option value="<%= i %>" <%=selected %>><%= repeats[i] %></option><%
								}
							%>
          </select>
        </div>
 
         <div class="form-group">
          <label for="repeatEnd" class="col-form-label">Repeat End</label>
          <div class="input-group date" id="repeatendpicker" data-target-input="nearest">
              <input id="repeatEnd" name="repeatEnd" type="text" class="form-control datetimepicker-input" data-target="#repeatendpicker"/>
              <div class="input-group-append" data-target="#repeatendpicker" data-toggle="datetimepicker">
                  <div class="input-group-text"><i class="fa fa-calendar"></i></div>
              </div>
          </div>
        </div>
 
        <div class="d-flex">
          <div class="p-2"><button type="submit" class="btn btn-sm btn-primary">Save</button></div>
          <div class="p-2"><button type="button" class="btn btn-sm btn-outline-secondary" data-remodal-action="cancel">Cancel</button></div>
          <div class="ml-auto p-2" id="delete_action"><button name="action" type="submit" class="btn btn-sm btn-outline-danger" value="delete">Delete</button></div>
        </div>
          
     </form>
     </div>
      
       
    <!-- ===============================================-->
    <!--    JavaScripts-->
    <!-- ===============================================-->
    <script src="assets/js/jquery.min.js"></script>
    <script src="assets/js/popper.min.js"></script>
    <script src="assets/js/bootstrap.js"></script>
    <script src="assets/js/plugins.js"></script>
    <script src="assets/lib/loaders.css/loaders.css.js"></script>
    <script src="assets/js/stickyfill.min.js"></script>
    <script src="assets/lib/remodal/remodal.js"></script>
    <script src="assets/js/rellax.min.js"></script>
	  <script src="assets/js/moment.min.js"></script>
    <script src="assets/js/tempusdominus-bootstrap-4.js"></script>
    <script src="assets/js/fullcalendar.min.js"></script>
    <script src="assets/js/bootstrap-select.js"></script>
    <script src="assets/js/theme.js"></script>
    <script src="assets/js/bootstrap-table.js"></script>
      
    
    <script type="text/javascript">
	   function initCalendar() {
			 $calendar = $('#fullCalendar');

        today = new Date();
        y = today.getFullYear();
        m = today.getMonth();
        d = today.getDate();

			 $calendar.fullCalendar({
					header: {
						left: 'title',
						center: 'month,agendaWeek,agendaDay',
						right: 'prev,next,today'
					},
          eventColor: '#666666',
          eventTextColor: '#FFF',
					defaultDate: today,
					selectable: true,
					selectHelper: true,
					views: {
							month: { // name of view
									titleFormat: 'MMMM YYYY'
									// other view-specific options here
							},
							week: {
									titleFormat: " MMMM D YYYY"
							},
							day: {
									titleFormat: 'D MMM, YYYY'
							}
					},
					select: function(start, end) {
            var inst = $('[data-remodal-id=editScheduleModal]').remodal();

            $('[data-remodal-id=editScheduleModal] #remodalTitle').text('Create a new Schedule');
            $('[data-remodal-id=editScheduleModal] #title').val("");
            $('[data-remodal-id=editScheduleModal] #id').val("");
            $('[data-remodal-id=editScheduleModal] #sid').selectpicker('val', ['0']); // None
            $('[data-remodal-id=editScheduleModal] #start').val(moment(start).format('MM/DD/YYYY hh:mm A'));
            $('[data-remodal-id=editScheduleModal] #end').val(moment(end).format('MM/DD/YYYY hh:mm A'));
            $('[data-remodal-id=editScheduleModal] #repeatDow').selectpicker('val', ['7']); // None
            $('[data-remodal-id=editScheduleModal] #repeatEnd').val(moment(end).format('MM/DD/YYYY hh:mm A'));

            inst.open();
						$('[data-remodal-id=editScheduleModal] #delete_action').addClass("hide-form-button");
					},
					eventClick: function(event, jsEvent, view) {
            var inst = $('[data-remodal-id=editScheduleModal]').remodal();

            $('[data-remodal-id=editScheduleModal] #remodalTitle').text('Update a Schedule');
            $('[data-remodal-id=editScheduleModal] #title').val(event.title);
            $('[data-remodal-id=editScheduleModal] #id').val(event.id);
            $('[data-remodal-id=editScheduleModal] #sid').selectpicker('val', event.sid);
            $('[data-remodal-id=editScheduleModal] #start').val(moment(event.start).format('MM/DD/YYYY hh:mm A'));
            $('[data-remodal-id=editScheduleModal] #end').val(moment(event.end).format('MM/DD/YYYY hh:mm A'));
            $('[data-remodal-id=editScheduleModal] #repeatDow').selectpicker('val', (typeof event.repeatDow == 'undefined') ? "" : event.repeatDow);
            $('[data-remodal-id=editScheduleModal] #repeatEnd').val((typeof event.repeatEnd === 'undefined') ? moment(event.end).format('MM/DD/YYYY hh:mm A') :                   
                                                                                                               moment(event.repeatEnd).format('MM/DD/YYYY'));

            inst.open();
						$('[data-remodal-id=editScheduleModal] #delete_action').removeClass("hide-form-button");
					},
         	eventDrop: function(event, delta, revertFunc) {
            var schedule = { id: event.id, sid: event.sid, title: event.title, start: event.start, end: event.end, repeatDow: event.repeatDow, repeatEnd: repeatEnd };
            
            $.ajax({
              url: `/schedules/update`,
              type: 'POST',
              data: JSON.stringify(schedule),
              contentType: "application/json",
              success: function (result) {
              }
            });
          },
					editable: true,
					eventLimit: true, // allow "more" link when too many events

					//color classes: [ event-blue | event-azure | event-green | event-orange | event-red ],
					events: {
					    url: '/schedules/getSchedules',
					    type: 'GET',
					}
				});
	   }

      $(document).ready(function(){
           initCalendar();

					 $('#starttimepicker').datetimepicker({
						 	 format: 'MM/DD/YYYY hh:mm A'
						});
					 $('#endtimepicker').datetimepicker({
						 	 format: 'MM/DD/YYYY hh:mm A'
						});
					 $('#repeatendpicker').datetimepicker({
						 	 format: 'MM/DD/YYYY'
						});        
      });
      

	</script>

  </body>

</html>